# flight-processor-range-based

основное воркфлоу работы таково
1. разово загрузить все отчёты для конкретного юзера
скорее всего отчёты за месяц - из баз VATSIM/IVAO, не из архивных
прогнать распознавалку на них и сохранить всё
2. в последующем запускать регулярно и отрабатывать
накопившиеся новые один или несколько запросов.
при таких запусках нужно будет грузить не просто несколько отчётов,
а поднимать предысторию в 24-36-48 часов и перестраивать весь этот интервал.
и вот тут надо мёржить полёты до и полёты после

таймлайн - список отчётов, в которые включаются и 
пропущенные датафидером отчёты и натуральные гэпы ватсима

таймлайн меняется при появлении очередного отчёта 
или по времени если очередного отчёта нет уже больше трёх минут

изменение таймлайна - это добавление нового отчёта
и это требует перепросчёта трэков



как мёржить полёты после очередной обработки
от текущего времени отступаем 24-36-48 часов 
и ищем отчёт который не покрыт никаким полётом
при поиске сдвигаемся в прошлое

если мы, отступив 24-36-48 часов, уткнулись в какой-то полёт, 
то мы уходим в прошлое на начало этого полёта

запоминаем отчёт с которого мы начали обработку

после получения новых полётов, сравниваем полёты до и после
те полёты которые полностью совпадают - не перетираем
те полёты которые хоть в чём то не совпадают - перетираем 
(удаляем старые и сохраняем на их место новые)
